<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>THE ART OF WEB — Checkout</title>
<link href="styles.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { font-family: Arial, sans-serif; transition: font 0.2s ease; background:#071018; color:#fff; }
  html[lang="ar"] body { font-family: 'Cairo', sans-serif; }

  header.header, footer.footer { background:#071018; color:#fff; }
  .container { max-width:1200px; margin:auto; padding:0 20px; }
  .header .logo img { max-height:80px; }
  nav.nav a { color:#fff; margin-left:15px; text-decoration:none; font-weight:bold; }
  nav.nav a:hover { color:#f6b042; }
  .lang-switch button { padding:4px 8px; margin-left:5px; cursor:pointer; border-radius:4px; border:none; background:#f6b042; color:#000; font-weight:bold; }
  .lang-switch button:hover { background:#e59c00; }

  /* Profile dropdown */
  .profile-container { position: relative; display:inline-block; cursor:pointer; margin-left:10px; }
  .profile-container img { width:36px; height:36px; border-radius:50%; border:2px solid #f6b042; }
  .profile-dropdown { display:none; position:absolute; right:0; background:#0a1a2a; color:#fff; box-shadow:0 2px 10px rgba(0,0,0,0.5); border-radius:8px; padding:10px; min-width:180px; z-index:999; }
  .profile-dropdown.active { display:block; }
  .profile-dropdown div { padding:8px 10px; cursor:pointer; color:#fff; }
  .profile-dropdown div:hover { background:#121212; }
  .profile-dropdown .email { font-size:12px; cursor:default; }

  /* Checkout card */
  .checkout .card { background:#1a1a1a; border-radius:12px; padding:30px; max-width:600px; margin:auto; }
  .checkout .card h2 { color:#f6b042; margin-bottom:15px; }
  .field { margin-bottom:15px; }
  .field input, .field select { width:100%; padding:10px; border-radius:6px; border:1px solid #555; background:#0a1a2a; color:#fff; }
  .cta { padding:12px; width:100%; background:#f6b042; color:#000; border:none; border-radius:6px; font-weight:bold; cursor:pointer; margin-top:10px; }
  .cta:hover { background:#e59c00; }

  /* Auth modal */
  .modal { display:none; position:fixed; z-index:9999; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,0.6); justify-content:center; align-items:center; }
  .modal.active { display:flex; }
  .modal-content { background:#0a1a2a; color:#fff; padding:30px; border-radius:12px; max-width:400px; width:90%; position:relative; }
  .close-modal { position:absolute; right:15px; top:10px; font-size:24px; cursor:pointer; color:#fff; }
  #auth-message { display:none; text-align:center; margin-bottom:10px; font-weight:bold; color:#f6b042; }
  #auth-modal input { width:100%; padding:10px; margin-bottom:10px; border-radius:6px; border:1px solid #555; background:#0a1a2a; color:#fff; }
  #auth-modal button { width:100%; padding:12px; border:none; border-radius:6px; background:#f6b042; color:#000; font-weight:bold; cursor:pointer; margin-top:5px; }
  #auth-modal button:hover { background:#e59c00; }
  .switch { text-align:center; margin-top:8px; cursor:pointer; color:#f6b042; font-size:14px; }
</style>
</head>
<body>

<header class="header fade-in">
  <div class="container">
    <div class="logo">
      <img src="images/logo.png" alt="THE ART OF WEB Logo">
      <div style="font-size:1.2rem;font-weight:bold;">THE ART OF WEB</div>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="packs.html">Packs</a>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact</a>
      <span id="user-menu"></span>
      <span class="lang-switch">
        <button id="lang-en">EN</button>
        <button id="lang-ar">AR</button>
      </span>
    </nav>
  </div>
</header>

<section class="checkout fade-in">
  <div class="container">
    <div class="card">
      <h2>Checkout</h2>
      <p>Fill in your details and select the pack you want to order.</p>

      <div class="field">
        <label for="name">Full Name</label>
        <input type="text" id="name" placeholder="John Doe" required>
      </div>

      <div class="field">
        <label for="email">Email</label>
        <input type="email" id="email" placeholder="you@example.com" required>
      </div>

      <div class="field">
        <label for="phone">Phone Number</label>
        <input type="tel" id="phone" placeholder="+212 6XX XXX XXX" required>
      </div>

      <div class="field">
        <label for="pack">Select Pack</label>
        <select id="pack">
          <option value="starter">Starter Website Pack — 2000 MAD</option>
          <option value="business">Business Website Pack — 5500 MAD</option>
          <option value="mobile">Mobile App Pack — 55000 MAD</option>
          <option value="advanced">Advanced Web Pack — 9000 MAD</option>
          <option value="enterprise">Enterprise App Pack — 95000 MAD</option>
          <option value="custom">Custom Pack — Contact Us</option>
        </select>
      </div>

      <div class="field">
        <label>Price</label>
        <div id="price" style="font-weight:800;color:#f6b042;font-size:18px;">250$</div>
      </div>

      <button class="cta" id="checkout-button">Proceed to Payment</button>
      <p class="small">*Clicking will open WhatsApp to complete your payment.</p>
    </div>
  </div>
</section>

<!-- Auth Modal -->
<div class="modal" id="auth-modal">
  <div class="modal-content">
    <span class="close-modal" id="close-modal">&times;</span>
    <div id="auth-message"></div>

    <div id="login-form">
      <h2>Login</h2>
      <input type="text" id="login-username" placeholder="Email or Username">
      <input type="password" id="login-password" placeholder="Password">
      <div class="switch" id="forgot-pass">Forgot Password?</div>
      <button id="login-btn">Login</button>
      <div class="switch" id="show-signup">Don't have an account? Sign Up</div>
    </div>

    <div id="signup-form" style="display:none">
      <h2>Sign Up</h2>
      <input type="text" id="signup-username" placeholder="Username">
      <input type="email" id="signup-email" placeholder="Email">
      <input type="email" id="signup-confirm-email" placeholder="Confirm Email">
      <input type="password" id="signup-password" placeholder="Password">
      <input type="password" id="signup-confirm-password" placeholder="Confirm Password">
      <button id="signup-btn">Sign Up</button>
      <div class="switch" id="show-login">Already have an account? Login</div>
    </div>

    <div id="reset-form" style="display:none">
      <h2>Reset Password</h2>
      <input type="email" id="reset-email" placeholder="Enter your registered email">
      <button id="reset-btn">Send Reset Link</button>
      <div class="switch" id="back-to-login">Back to Login</div>
    </div>
  </div>
</div>

<footer class="footer fade-in">
  <div class="container">
    <div class="col">
      <h4>Connect with Us</h4>
      <p>
        <a href="https://instagram.com/@the.art.of.web" target="_blank">INSTAGRAM</a><br>
        <a href="mailto:theartofwebsupp@gmail.com">GMAIL: theartofwebsupp@gmail.com</a><br>
        <a href="https://wa.me/+212682935120" target="_blank">WhatsApp</a>
      </p>
    </div>
  </div>
</footer>


<script>
let lang = "en"; // default language

// Your translations object
const translations = {
  en: {
    navHome: "Home",
    navPacks: "Packs",
    navAbout: "About Us",
    navContact: "Contact",
    checkoutTitle: "Checkout",
    checkoutDesc: "Fill in your details and select the pack you want to order.",
    nameLabel: "Full Name",
    emailLabel: "Email",
    phoneLabel: "Phone Number",
    packLabel: "Select Pack",
    priceLabel: "Price",
    proceedBtn: "Proceed to Payment",
    forgotPass: "Forgot Password?",
    loginTitle: "Login",
    signupTitle: "Sign Up",
    resetTitle: "Reset Password",
    backToLogin: "Back to Login",
    signupSwitch: "Don't have an account? Sign Up",
    loginSwitch: "Already have an account? Login",
    footerInstagram: "INSTAGRAM",
    footerEmail: "GMAIL: theartofwebsupp@gmail.com",
    footerWhatsapp: "WhatsApp",
    profileLogout: "Logout",
    profileLogin: "Login / Sign Up"
  },
  ar: {
    navHome: "الرئيسية",
    navPacks: "الباقات",
    navAbout: "من نحن",
    navContact: "تواصل معنا",
    checkoutTitle: "الدفع",
    checkoutDesc: "املأ بياناتك واختر الباك الذي تريد طلبه.",
    nameLabel: "الاسم الكامل",
    emailLabel: "البريد الإلكتروني",
    phoneLabel: "رقم الهاتف",
    packLabel: "اختر الباك",
    priceLabel: "السعر",
    proceedBtn: "المتابعة للدفع",
    forgotPass: "نسيت كلمة المرور؟",
    loginTitle: "تسجيل الدخول",
    signupTitle: "إنشاء حساب",
    resetTitle: "إعادة تعيين كلمة المرور",
    backToLogin: "العودة لتسجيل الدخول",
    signupSwitch: "ليس لديك حساب؟ أنشئ حساب",
    loginSwitch: "لديك حساب؟ تسجيل الدخول",
    footerInstagram: "إنستجرام",
    footerEmail: "البريد الإلكتروني: theartofwebsupp@gmail.com",
    footerWhatsapp: "واتساب",
    profileLogout: "تسجيل الخروج",
    profileLogin: "تسجيل الدخول / إنشاء حساب"
  }
};

// Update all texts
function updateTexts() {
  const t = translations[lang];

  // Navbar
  document.querySelector('nav.nav a[href="index.html"]').textContent = t.navHome;
  document.querySelector('nav.nav a[href="packs.html"]').textContent = t.navPacks;
  document.querySelector('nav.nav a[href="about.html"]').textContent = t.navAbout;
  document.querySelector('nav.nav a[href="contact.html"]').textContent = t.navContact;

  // Checkout section
  document.querySelector(".checkout h2").textContent = t.checkoutTitle;
  document.querySelector(".checkout p").textContent = t.checkoutDesc;
  document.querySelector('label[for="name"]').textContent = t.nameLabel;
  document.querySelector('label[for="email"]').textContent = t.emailLabel;
  document.querySelector('label[for="phone"]').textContent = t.phoneLabel;
  document.querySelector('label[for="pack"]').textContent = t.packLabel;
  document.querySelector('label[for="price"]').textContent = t.priceLabel;
  document.getElementById("checkout-button").textContent = t.proceedBtn;

  // Footer
  document.querySelector(".footer a[href*='instagram']").textContent = t.footerInstagram;
  document.querySelector(".footer a[href*='mailto']").textContent = t.footerEmail;
  document.querySelector(".footer a[href*='wa.me']").textContent = t.footerWhatsapp;

  // Auth Modal
  document.getElementById("forgot-pass").textContent = t.forgotPass;
  document.querySelector("#login-form h2").textContent = t.loginTitle;
  document.querySelector("#signup-form h2").textContent = t.signupTitle;
  document.querySelector("#reset-form h2").textContent = t.resetTitle;
  document.getElementById("back-to-login").textContent = t.backToLogin;
  document.getElementById("show-signup").textContent = t.signupSwitch;
  document.getElementById("show-login").textContent = t.loginSwitch;

  // Update profile menu if open
  renderUserMenu(); 
}

// Language buttons
document.getElementById("lang-en").addEventListener("click", () => { lang = "en"; document.documentElement.lang = "en"; updateTexts(); });
document.getElementById("lang-ar").addEventListener("click", () => { lang = "ar"; document.documentElement.lang = "ar"; updateTexts(); });

// Render user menu
function renderUserMenu(){
  const t = translations[lang];
  const userMenu=document.getElementById("user-menu");
  const user=JSON.parse(localStorage.getItem("loggedUser"));
  if(user){
    userMenu.innerHTML=`<div class="profile-container" id="profile-container">
      <img src="profile-logo.png" alt="Profile">
      <div class="profile-dropdown" id="profile-dropdown">
        <div>👤 ${user.username}</div>
        <div class="email">${user.email}</div>
        <div id="logout">${t.profileLogout}</div>
      </div>
    </div>`;
    const pc=document.getElementById("profile-container");
    const pd=document.getElementById("profile-dropdown");
    pc.addEventListener("click",()=>pd.classList.toggle("active"));
    document.getElementById("logout").addEventListener("click",()=>{localStorage.removeItem("loggedUser");renderUserMenu();});
  } else {
    userMenu.innerHTML=`<div class="profile-container" id="profile-container">
      <img src="profile-logo.png" alt="Profile">
      <div class="profile-dropdown" id="profile-dropdown">
        <div id="login-link">${t.profileLogin}</div>
      </div>
    </div>`;
    const pc=document.getElementById("profile-container");
    const pd=document.getElementById("profile-dropdown");
    pc.addEventListener("click",()=>pd.classList.toggle("active"));
    document.getElementById("login-link").addEventListener("click",()=>{authModal.classList.add("active");loginForm.style.display="block";signupForm.style.display="none";resetForm.style.display="none";});
  }
}

// Initial render
updateTexts();


// Apply saved language on page load
const savedLang = localStorage.getItem("lang") || "en";
updateLanguage(savedLang);

</script>


<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>emailjs.init("LUva89Ktxhzp_pdRq");</script>

<script>
const priceMap={starter:2000,business:5500,mobile:55000,advanced:9000,enterprise:95000};
const packSelect=document.getElementById("pack");
const priceDiv=document.getElementById("price");
function updatePrice(){const p=packSelect.value;priceDiv.textContent=priceMap[p]?priceMap[p]+"MAD":"Contact Us";}
packSelect.addEventListener("change",updatePrice);updatePrice();

const checkoutBtn=document.getElementById("checkout-button");
const authModal=document.getElementById("auth-modal");
const loginForm=document.getElementById("login-form");
const signupForm=document.getElementById("signup-form");
const resetForm=document.getElementById("reset-form");
function showMessage(msg){const el=document.getElementById("auth-message");el.style.display="block";el.textContent=msg;setTimeout(()=>el.style.display="none",3000);}

checkoutBtn.addEventListener("click",()=>{
  const loggedUser=JSON.parse(localStorage.getItem("loggedUser"));
  if(!loggedUser){showMessage("Please login first!");authModal.classList.add("active");loginForm.style.display="block";signupForm.style.display="none";resetForm.style.display="none";return;}
  const pack=packSelect.value;const amount=priceMap[pack]||"Contact Us";
  if(pack==="custom"){showMessage("Please contact us for a custom pack.");return;}
  const name=document.getElementById("name").value||loggedUser.username;
  const email=document.getElementById("email").value||loggedUser.email;
  const phone=document.getElementById("phone").value||"[Your Phone]";
  const msg=encodeURIComponent(`Hello, I want to order the ${pack} pack.\nPrice: ${amount}$\nName: ${name}\nEmail: ${email}\nPhone: ${phone}`);
  window.open(`https://wa.me/+212682935120?text=${msg}`,"_blank");
});

const userMenu=document.getElementById("user-menu");
function renderUserMenu() {
  const user = JSON.parse(localStorage.getItem("loggedUser"));
  const lang = localStorage.getItem("lang") || "en";
  const t = translations[lang];

  if (user) {
    userMenu.innerHTML = `
      <div class="profile-container" id="profile-container">
        <img src="profile-logo.png" alt="Profile">
        <div class="profile-dropdown" id="profile-dropdown">
          <div>👤 ${user.username}</div>
          <div class="email">${user.email}</div>
          <div id="logout">${t.profileLogout}</div>
        </div>
      </div>`;
    const pc = document.getElementById("profile-container");
    const pd = document.getElementById("profile-dropdown");
    pc.addEventListener("click", () => pd.classList.toggle("active"));
    document.getElementById("logout").addEventListener("click", () => {
      localStorage.removeItem("loggedUser");
      renderUserMenu();
    });
  } else {
    userMenu.innerHTML = `
      <div class="profile-container" id="profile-container">
        <img src="profile-logo.png" alt="Profile">
        <div class="profile-dropdown" id="profile-dropdown">
          <div id="login-link">${t.profileLogin}</div>
        </div>
      </div>`;
    const pc = document.getElementById("profile-container");
    const pd = document.getElementById("profile-dropdown");
    pc.addEventListener("click", () => pd.classList.toggle("active"));
    document.getElementById("login-link").addEventListener("click", () => {
      authModal.classList.add("active");
      loginForm.style.display = "block";
      signupForm.style.display = "none";
      resetForm.style.display = "none";
    });
  }
}

renderUserMenu();

document.getElementById("close-modal").addEventListener("click",()=>authModal.classList.remove("active"));
document.getElementById("show-signup").addEventListener("click",()=>{loginForm.style.display="none";signupForm.style.display="block";resetForm.style.display="none";});
document.getElementById("show-login").addEventListener("click",()=>{loginForm.style.display="block";signupForm.style.display="none";resetForm.style.display="none";});
document.getElementById("forgot-pass").addEventListener("click",()=>{loginForm.style.display="none";signupForm.style.display="none";resetForm.style.display="block";});
document.getElementById("back-to-login").addEventListener("click",()=>{loginForm.style.display="block";signupForm.style.display="none";resetForm.style.display="none";});

document.getElementById("login-btn").addEventListener("click",()=>{
  const username=document.getElementById("login-username").value.trim();
  const password=document.getElementById("login-password").value.trim();
  const users=JSON.parse(localStorage.getItem("signupUsers")||"[]");
  const user=users.find(u=>(u.username===username||u.email===username)&&u.password===password);
  if(user){localStorage.setItem("loggedUser",JSON.stringify(user));authModal.classList.remove("active");renderUserMenu();showMessage("Logged in successfully!");}
  else showMessage("Invalid credentials.");
});

document.getElementById("signup-btn").addEventListener("click",()=>{
  const username=document.getElementById("signup-username").value.trim();
  const email=document.getElementById("signup-email").value.trim();
  const confirmEmail=document.getElementById("signup-confirm-email").value.trim();
  const password=document.getElementById("signup-password").value.trim();
  const confirmPassword=document.getElementById("signup-confirm-password").value.trim();
  const users=JSON.parse(localStorage.getItem("signupUsers")||"[]");
  if(!username||!email||!password){showMessage("All fields required");return;}
  if(email!==confirmEmail){showMessage("Emails do not match");return;}
  if(password!==confirmPassword){showMessage("Passwords do not match");return;}
  if(users.some(u=>u.username===username||u.email===email)){showMessage("User already exists");return;}
  users.push({username,email,password});localStorage.setItem("signupUsers",JSON.stringify(users));
  localStorage.setItem("loggedUser",JSON.stringify({username,email}));
  authModal.classList.remove("active");renderUserMenu();showMessage("Sign up successful!");
});

document.getElementById("reset-btn").addEventListener("click",async()=>{
  const email=document.getElementById("reset-email").value.trim();
  const users=JSON.parse(localStorage.getItem("signupUsers")||"[]");
  const user=users.find(u=>u.email===email);
  if(!email){showMessage("Email required");return;}
  if(!user){showMessage("Email not found");return;}
  const resetLink=`https://theartofweb.vercel.app/reset-password.html?email=${encodeURIComponent(email)}`;
  const params={user_name:user.username||"User",user_email:email,reset_link:resetLink,support_email:"theartofwebsupp@gmail.com"};
  try{await emailjs.send("service_qzps9pc","template_2rgjans",params);showMessage("Reset link sent to your email!");resetForm.style.display="none";loginForm.style.display="block";}
  catch(e){console.error(e);showMessage("Failed to send reset email.");}
});
</script>
</body>
</html>
