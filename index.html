<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>THE ART OF WEB â€” Home</title>
    <link href="styles.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
      // Initialize EmailJS with public key you provided
      (function () {
        try {
          emailjs.init("LUva89Ktxhzp_pdRq");
        } catch (e) {
          // ignore if SDK not loaded
          console.warn("EmailJS init failed", e);
        }
      })();
    </script>

    <style>
      body.arabic {
        font-family: "Cairo", sans-serif;
        direction: rtl;
        text-align: right;
      }
      body.english {
        direction: ltr;
        text-align: left;
      }
      body {
        background: #071018;
        color: #fff;
      }

      /* Responsive adjustments */
      @media (max-width: 900px) {
        .hero-left,
        .hero-right {
          flex: 1 1 100%;
        }
        .story-images {
          flex-direction: column;
          align-items: center;
        }
        .pack-grid {
          grid-template-columns: 1fr;
        }
      }
      @media (max-width: 480px) {
        .hero-title {
          font-size: 26px;
        }
        .cta,
        .btn-inline {
          padding: 8px 16px;
          font-size: 14px;
        }
      }

      /* language switch */
      .lang-switch {
        display: inline-flex;
        gap: 5px;
      }
      .lang-switch button {
        padding: 5px 10px;
        border: 1px solid #555;
        background: #fff;
        cursor: pointer;
        font-weight: bold;
        border-radius: 4px;
        transition: 0.2s;
      }
      .lang-switch button:hover {
        background: #555;
        color: #fff;
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        justify-content: center;
        align-items: center;
      }
      .modal.active {
        display: flex;
      }
      .modal-content {
        background: #0a1a2a;
        color: #fff;
        padding: 30px;
        border-radius: 12px;
        max-width: 420px;
        width: 92%;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        position: relative;
        animation: slideIn 0.28s ease;
      }
      @keyframes slideIn {
        from {
          transform: translateY(-40px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .modal-content h2 {
        margin-bottom: 20px;
        text-align: center;
      }
      .modal-content .field {
        margin-bottom: 12px;
      }
      .modal-content input,
      .modal-content textarea {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #555;
        background: #1a1a1a;
        color: #fff;
      }
      .modal-content button {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 6px;
        background: #f6b042;
        color: #000;
        font-weight: bold;
        cursor: pointer;
      }
      .modal-content button:hover {
        background: #e59c00;
        color: #000;
      }
      .modal-content .switch {
        margin-top: 10px;
        text-align: center;
        font-size: 14px;
        cursor: pointer;
        color: #f6b042;
      }
      .modal-content .switch:hover {
        text-decoration: underline;
      }
      .close-modal {
        position: absolute;
        right: 15px;
        top: 10px;
        font-size: 24px;
        cursor: pointer;
        color: #fff;
      }

      /* Profile styles */
      .profile-container {
        position: relative;
        display: inline-block;
        cursor: pointer;
        margin-left: 10px;
      }
      .profile-container img {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 2px solid #f6b042;
        display: block;
      }
      .profile-dropdown {
        display: none;
        position: absolute;
        right: 0;
        background: #0a1a2a;
        color: #fff;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        border-radius: 8px;
        padding: 10px;
        min-width: 180px;
        z-index: 999;
      }
      .profile-dropdown.active {
        display: block;
      }
      .profile-dropdown div {
        padding: 8px 10px;
        cursor: pointer;
        color: #fff;
      }
      .profile-dropdown div:hover {
        background: #121212;
      }
      .profile-dropdown .email {
        font-size: 12px;
        cursor: default;
      }

      /* main blocks */
      .packs {
        padding: 50px 20px;
        text-align: center;
        background: #071018;
        color: #fff;
      }
      .packs h2 {
        margin-bottom: 40px;
        color: #fff;
      }
      .pack-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        max-width: 1000px;
        margin: 0 auto;
      }
      .pack-card {
        border: none;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        background: #1a1a1a;
        color: #fff;
      }
      .pack-card img {
        max-width: 100%;
        border-radius: 6px;
      }
      .pack-card h3 {
        margin: 15px 0;
        color: #fff;
      }
      .pack-card a {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 20px;
        background: #f6b042;
        color: #000;
        border-radius: 6px;
        text-decoration: none;
        font-weight: bold;
      }
      .pack-card a:hover {
        background: #e59c00;
        color: #000;
      }

      .about {
        padding: 50px 20px;
        text-align: center;
        color: #fff;
      }
      .about h2 {
        margin-bottom: 20px;
        color: #fff;
      }
      .about p {
        max-width: 700px;
        margin: 0 auto;
        font-size: 16px;
        line-height: 1.6;
        color: #d7d7d7;
      }

      header.header {
        background: #071018;
        color: #fff;
        display: block;
        padding: 18px 0;
      }
      .header .container {
        display: flex;
        align-items: center;
        gap: 20px;
        justify-content: space-between;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      .logo img {
        height: 40px;
        display: block;
      }
      .nav {
        display: flex;
        align-items: center;
        gap: 16px;
      }
      .nav a {
        color: #fff;
        text-decoration: none;
        font-weight: 600;
      }
      .hero {
        background: #071018;
        color: #fff;
        padding: 50px 0;
      }
      .hero .container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        gap: 24px;
        align-items: center;
        padding: 0 20px;
      }
      .hero-left {
        flex: 1;
      }
      .hero-right {
        flex: 1;
        text-align: center;
      }
      .hero-right img {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
      }

      /* footer */
      footer.footer {
        background: #071018;
        color: #fff;
        padding: 28px 0;
      }
      footer.footer a {
        color: #fff;
        text-decoration: none;
      }
      footer.footer a:hover {
        color: #f6b042;
        text-decoration: underline;
      }

      /* inline message */
      .form-message-inline {
        margin-top: 8px;
        font-size: 14px;
        text-align: center;
        display: block;
      }

      /* small screens */
      @media (max-width: 720px) {
        .nav {
          gap: 8px;
        }
        .profile-container {
          margin-left: 6px;
        }
      }
    </style>
  </head>
  <body class="english">
    <!-- Header -->
    <header class="header fade-in">
      <div class="container">
        <div class="logo">
          <img src="images/logo.png" alt="THE ART OF WEB Logo" />
          <div>THE ART OF WEB</div>
        </div>
        <nav class="nav">
          <a href="index.html" data-en="Home" data-ar="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">Home</a>
          <a href="packs.html" data-en="Packs" data-ar="Ø§Ù„Ø¨Ø§Ù‚Ø§Øª">Packs</a>
          <a href="about.html" data-en="About Us" data-ar="Ù…Ù† Ù†Ø­Ù†">About Us</a>
          <a href="contact.html" data-en="Contact" data-ar="Ø§ØªØµÙ„ Ø¨Ù†Ø§"
            >Contact</a
          >

          <!-- Profile Icon -->
          <div
            class="profile-container"
            id="profile-container"
            aria-haspopup="true"
          >
            <img src="profile-logo.png" alt="Profile Icon" id="profile-icon" />
            <div class="profile-dropdown" id="profile-dropdown">
              <div
                id="login-signup-item"
                data-en="Login / Sign Up"
                data-ar="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨"
              >
                Login / Sign Up
              </div>
            </div>
          </div>

          <span class="lang-switch">
            <button id="lang-en">EN</button>
            <button id="lang-ar">AR</button>
          </span>
        </nav>
      </div>
    </header>

    <section class="hero">
      <div class="container">
        <div class="hero-left fade-in">
          <h1
            class="hero-title"
            data-en="We build websites & apps that grow your business"
            data-ar="Ù†Ø­Ù† Ù†Ø¨Ù†ÙŠ Ù…ÙˆØ§Ù‚Ø¹ ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª ØªÙ†Ù…Ù‘ÙŠ Ø¹Ù…Ù„Ùƒ"
          >
            We build websites & apps that grow your business
          </h1>
          <p
            class="hero-sub"
            data-en="THE ART OF WEB â€” modern web and mobile development."
            data-ar="ÙÙ† Ø§Ù„ÙˆÙŠØ¨ â€” ØªØ·ÙˆÙŠØ± Ø­Ø¯ÙŠØ« Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª."
          >
            THE ART OF WEB â€” modern web and mobile development.
          </p>
          <a
            class="cta"
            href="packs.html"
            data-en="See Packs"
            data-ar="Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª"
            >See Packs</a
          >
          <a
            class="btn-inline"
            href="contact.html"
            data-en="Contact Us"
            data-ar="Ø§ØªØµÙ„ Ø¨Ù†Ø§"
            >Contact Us</a
          >
        </div>
        <div class="hero-right fade-in">
          <img src="hero-image.png" alt="Team working on projects" />
        </div>
      </div>
    </section>

    <section class="about">
      <h2 data-en="About THE ART OF WEB" data-ar="Ø­ÙˆÙ„ THE ART OF WEB">
        About THE ART OF WEB
      </h2>
      <p
        data-en="We are a modern web and app development agency offering complete website and mobile app solutions. From design to deployment, we help your business grow online."
        data-ar="Ù†Ø­Ù† ÙˆÙƒØ§Ù„Ø© Ø­Ø¯ÙŠØ«Ø© Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙˆØ§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù†Ù‚Ø¯Ù… Ø­Ù„ÙˆÙ„Ø§Ù‹ Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¹Ù„Ù‰ ØªÙ†Ù…ÙŠØ© Ø¹Ù…Ù„Ùƒ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª."
      >
        We are a modern web and app development agency offering complete website
        and mobile app solutions. From design to deployment, we help your
        business grow online.
      </p>
    </section>

    <section class="packs">
      <h2 data-en="Our Popular Packs" data-ar="Ø¨Ø§Ù‚Ø§ØªÙ†Ø§ Ø§Ù„Ø´Ù‡ÙŠØ±Ø©">
        Our Popular Packs
      </h2>
      <div class="pack-grid">
        <div class="pack-card">
          <h3 data-en="Starter Website Pack" data-ar="Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¨Ø¯Ø¦ÙŠ">
            Starter Website Pack
          </h3>
          <div class="price">2000 MAD</div>
          <ul style="text-align: left; padding-left: 20px">
            <li data-en="Up to 5 pages" data-ar="Ø­ØªÙ‰ 5 ØµÙØ­Ø§Øª">Up to 5 pages</li>
            <li data-en="Responsive design" data-ar="ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨">
              Responsive design
            </li>
            <li data-en="Contact form" data-ar="Ù†Ù…ÙˆØ°Ø¬ Ø§ØªØµØ§Ù„">Contact form</li>
          </ul>
          <a
            href="checkout.html?pack=starter"
            data-en="Order This Pack"
            data-ar="Ø§Ø·Ù„Ø¨ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø©"
            >Order This Pack</a
          >
        </div>
        <div class="pack-card">
          <h3 data-en="Business Website Pack" data-ar="Ø¨Ø§Ù‚Ø© Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„">
            Business Website Pack
          </h3>
          <div class="price">5500 MAD</div>
          <ul style="text-align: left; padding-left: 20px">
            <li data-en="Custom design" data-ar="ØªØµÙ…ÙŠÙ… Ù…Ø®ØµØµ">Custom design</li>
            <li data-en="CMS integration" data-ar="Ø¯Ù…Ø¬ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰">
              CMS integration
            </li>
          </ul>
          <a
            href="checkout.html?pack=business"
            data-en="Order This Pack"
            data-ar="Ø§Ø·Ù„Ø¨ Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø©"
            >Order This Pack</a
          >
        </div>
      </div>
    </section>

    <!-- Auth Modal with Login, Signup, Reset -->
    <div class="modal" id="auth-modal" aria-hidden="true">
      <div class="modal-content" role="dialog" aria-modal="true">
        <span class="close-modal" id="close-modal" aria-label="Close"
          >&times;</span
        >

        <!-- LOGIN -->
        <div id="login-form">
          <h2 data-en="Login" data-ar="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">Login</h2>
          <div class="field">
            <input
              type="text"
              id="login-username"
              placeholder="Email or Username"
              data-en="Email or Username"
              data-ar="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"
            />
          </div>
          <div class="field">
            <input
              type="password"
              id="login-password"
              placeholder="Password"
              data-en="Password"
              data-ar="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
            />
          </div>
          <div
            class="form-message-inline"
            id="login-message"
            aria-live="polite"
          ></div>
          <div style="display: flex; gap: 10px; margin-top: 12px">
            <button id="login-btn" data-en="Login" data-ar="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">
              Login
            </button>
          </div>
          <div
            class="switch"
            id="forgot-pass"
            data-en="Forgot Password?"
            data-ar="Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ"
            style="margin-top: 10px; cursor: pointer"
          >
            Forgot Password?
          </div>
          <div
            class="switch"
            id="show-signup"
            data-en="Don't have an account? Sign Up"
            data-ar="Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨"
            style="margin-top: 10px; cursor: pointer"
          >
            Don't have an account? Sign Up
          </div>
        </div>

        <!-- SIGNUP -->
        <div id="signup-form" style="display: none">
          <h2 data-en="Sign Up" data-ar="Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨">Sign Up</h2>

          <div class="field">
            <input
              type="text"
              id="signup-username"
              placeholder="Username"
              data-en="Username"
              data-ar="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"
            />
          </div>

          <div class="field">
            <input
              type="email"
              id="signup-email"
              placeholder="Email"
              data-en="Email"
              data-ar="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"
            />
          </div>

          <div class="field">
            <input
              type="email"
              id="signup-confirm-email"
              placeholder="Confirm Email"
              data-en="Confirm Email"
              data-ar="ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"
            />
          </div>

          <div class="field">
            <input
              type="password"
              id="signup-password"
              placeholder="Password"
              data-en="Password"
              data-ar="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
            />
          </div>

          <div class="field">
            <input
              type="password"
              id="signup-confirm-password"
              placeholder="Confirm Password"
              data-en="Confirm Password"
              data-ar="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
            />
          </div>

          <button id="signup-btn" data-en="Sign Up" data-ar="Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨">
            Sign Up
          </button>
          <div class="form-message" id="signup-message"></div>

          <div
            class="switch"
            id="show-login"
            data-en="Already have an account? Login"
            data-ar="Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"
          >
            Already have an account? Login
          </div>
        </div>

        <!-- RESET -->
        <div id="reset-form" style="display: none">
          <h2 data-en="Reset Password" data-ar="Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            Reset Password
          </h2>
          <div class="field">
            <input
              type="email"
              id="reset-email"
              placeholder="Enter your registered email"
              data-en="Enter your registered email"
              data-ar="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„"
            />
          </div>
          <div
            class="form-message-inline"
            id="reset-message"
            aria-live="polite"
          ></div>
          <div style="display: flex; gap: 10px; margin-top: 12px">
            <button
              id="reset-btn"
              data-en="Send Reset Link"
              data-ar="Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†"
            >
              Send Reset Link
            </button>
          </div>
          <div
            class="switch"
            id="back-to-login"
            data-en="Back to Login"
            data-ar="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"
            style="margin-top: 10px; cursor: pointer"
          >
            Back to Login
          </div>
        </div>
      </div>
    </div>

    <footer class="footer fade-in">
      <div class="container">
        <div class="col">
          <h4 data-en="Connect with Us" data-ar="ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§">
            Connect with Us
          </h4>
          <p>
            <a href="https://instagram.com/@the.art.of.web" target="_blank"
              >INSTAGRAM</a
            ><br />
            <a href="mailto:theartofwebsupp@gmail.com"
              >GMAIL: theartofwebsupp@gmail.com</a
            ><br />
            <a href="https://wa.me/+212682935120" target="_blank">WhatsApp</a>
          </p>
          <div style="text-align: center; margin-top: 20px; font-size: 14px">
            Â© 2025 THE ART OF WEB. All rights reserved.
          </div>
        </div>
      </div>
    </footer>

    <script>
      /* ---------- Utility: inline message ---------- */
      function showInlineMessage(id, message, color) {
        const el = document.getElementById(id);
        if (!el) return;
        el.textContent = message;
        el.style.display = "block";
        el.style.color = color || "#f6b042";
        // clear after 4s
        setTimeout(() => {
          if (el) el.textContent = "";
        }, 4000);
      }

      /* ---------- Translation / Language ---------- */
      function translatePage(lang) {
        document.querySelectorAll("[data-en]").forEach((el) => {
          const text =
            el.getAttribute("data-" + lang) || el.getAttribute("data-en");
          // inputs: placeholder
          if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") {
            el.placeholder = text;
          } else {
            el.textContent = text;
          }
        });
      }
      function setLanguage(lang) {
        localStorage.setItem("siteLang", lang);
        document.body.classList.remove("english", "arabic");
        document.body.classList.add(lang === "ar" ? "arabic" : "english");
        translatePage(lang);
        updateProfileDropdownWords();
      }
      document
        .getElementById("lang-en")
        .addEventListener("click", () => setLanguage("en"));
      document
        .getElementById("lang-ar")
        .addEventListener("click", () => setLanguage("ar"));
      setLanguage(localStorage.getItem("siteLang") || "en");

      /* ---------- Profile menu rendering ---------- */
      const profileContainer = document.getElementById("profile-container");
      const profileDropdown = document.getElementById("profile-dropdown");
      const authModal = document.getElementById("auth-modal");
      const closeModal = document.getElementById("close-modal");
      const loginForm = document.getElementById("login-form");
      const signupForm = document.getElementById("signup-form");
      const resetForm = document.getElementById("reset-form");

      function updateProfileDropdownWords() {
        const lang = localStorage.getItem("siteLang") || "en";
        // If dropdown has login-signup item, update its text
        const loginSignupItem = document.getElementById("login-signup-item");
        if (loginSignupItem) {
          loginSignupItem.textContent =
            lang === "en" ? "Login / Sign Up" : "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨";
        }
      }
      updateProfileDropdownWords();

      let loggedUser = JSON.parse(localStorage.getItem("loggedUser") || "null");

      function renderUserMenu() {
        const lang = localStorage.getItem("siteLang") || "en";
        // If loggedUser exists, change dropdown content
        if (loggedUser) {
          profileDropdown.innerHTML = `
      <div class="username">ðŸ‘¤ ${escapeHtml(loggedUser.username)}</div>
      <div class="email">${escapeHtml(loggedUser.email)}</div>
      <div id="logout-btn">${lang === "en" ? "Logout" : "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"}</div>
    `;
          // attach logout
          const logoutBtn = document.getElementById("logout-btn");
          if (logoutBtn) {
            logoutBtn.onclick = () => {
              localStorage.removeItem("loggedUser");
              loggedUser = null;
              renderUserMenu();
              showInlineMessage(
                "login-message",
                lang === "en" ? "âœ… Logged out" : "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
                "#4caf50"
              );
            };
          }
        } else {
          profileDropdown.innerHTML = `<div id="login-signup-item">${
            lang === "en" ? "Login / Sign Up" : "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨"
          }</div>`;
          const item = document.getElementById("login-signup-item");
          if (item) {
            item.onclick = (e) => {
              e.stopPropagation();
              authModal.classList.add("active");
              loginForm.style.display = "block";
              signupForm.style.display = "none";
              resetForm.style.display = "none";
              translatePage(localStorage.getItem("siteLang") || "en");
            };
          }
        }
      }
      renderUserMenu();

      // clicking profile toggles dropdown
      profileContainer.addEventListener("click", (e) => {
        e.stopPropagation();
        profileDropdown.classList.toggle("active");
      });
      // close dropdown if click outside
      document.addEventListener("click", () =>
        profileDropdown.classList.remove("active")
      );

      /* ---------- Modal controls ---------- */
      closeModal.addEventListener("click", () =>
        authModal.classList.remove("active")
      );
      document.getElementById("show-signup").addEventListener("click", () => {
        loginForm.style.display = "none";
        signupForm.style.display = "block";
        resetForm.style.display = "none";
        translatePage(localStorage.getItem("siteLang") || "en");
      });
      document.getElementById("show-login").addEventListener("click", () => {
        signupForm.style.display = "none";
        loginForm.style.display = "block";
        resetForm.style.display = "none";
        translatePage(localStorage.getItem("siteLang") || "en");
      });
      document.getElementById("forgot-pass").addEventListener("click", () => {
        loginForm.style.display = "none";
        signupForm.style.display = "none";
        resetForm.style.display = "block";
        translatePage(localStorage.getItem("siteLang") || "en");
      });
      document.getElementById("back-to-login").addEventListener("click", () => {
        resetForm.style.display = "none";
        loginForm.style.display = "block";
        signupForm.style.display = "none";
        translatePage(localStorage.getItem("siteLang") || "en");
      });

      /* ---------- Auth: Signup / Login / Reset ---------- */

      // small helper to escape user-provided strings when showing in DOM
      function escapeHtml(str) {
        if (!str) return "";
        return String(str).replace(/[&<>"']/g, function (m) {
          return {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;",
          }[m];
        });
      }

      /* SIGNUP */
      document.getElementById("signup-btn").onclick = () => {
        const username = document
          .getElementById("signup-username")
          .value.trim();
        const email = document.getElementById("signup-email").value.trim();
        const confirmEmail = document
          .getElementById("signup-confirm-email")
          .value.trim();
        const password = document
          .getElementById("signup-password")
          .value.trim();
        const confirmPassword = document
          .getElementById("signup-confirm-password")
          .value.trim();
        const msg = document.getElementById("signup-message");
        const lang = localStorage.getItem("siteLang") || "en";

        msg.className = "form-message"; // reset classes
        msg.textContent = ""; // clear previous message

        if (
          !username ||
          !email ||
          !confirmEmail ||
          !password ||
          !confirmPassword
        ) {
          msg.textContent =
            lang === "ar" ? "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©" : "All fields are required";
          msg.classList.add("error");
          return;
        }

        if (email !== confirmEmail) {
          msg.textContent =
            lang === "ar"
              ? "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚"
              : "Emails do not match";
          msg.classList.add("error");
          return;
        }

        if (password !== confirmPassword) {
          msg.textContent =
            lang === "ar"
              ? "ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©"
              : "Passwords do not match";
          msg.classList.add("error");
          return;
        }

        const users = JSON.parse(localStorage.getItem("signupUsers") || "[]");
        if (users.some((u) => u.email === email)) {
          msg.textContent =
            lang === "ar"
              ? "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„"
              : "Email already exists";
          msg.classList.add("error");
          return;
        }

        const newUser = { username, email, password };
        users.push(newUser);
        localStorage.setItem("signupUsers", JSON.stringify(users));
        localStorage.setItem("loggedUser", JSON.stringify(newUser));
        loggedUser = newUser;
        updateProfileMenu();

        msg.textContent =
          lang === "ar"
            ? "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!"
            : "Account created successfully!";
        msg.classList.add("success");

        // Close modal after 1.5s
        setTimeout(() => {
          authModal.classList.remove("active");
          msg.textContent = "";
        }, 1500);
      };

      /* LOGIN */
      document.getElementById("login-btn").addEventListener("click", () => {
        const usernameInput = document
          .getElementById("login-username")
          .value.trim();
        const password = document.getElementById("login-password").value.trim();
        const lang = localStorage.getItem("siteLang") || "en";

        if (!usernameInput || !password) {
          showInlineMessage(
            "login-message",
            lang === "en"
              ? "âš  Enter username/email and password"
              : "âš  Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…/Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",
            "#f44336"
          );
          return;
        }

        const users = JSON.parse(localStorage.getItem("signupUsers") || "[]");
        const found = users.find(
          (u) =>
            (u.username === usernameInput || u.email === usernameInput) &&
            u.password === password
        );
        if (found) {
          localStorage.setItem("loggedUser", JSON.stringify(found));
          loggedUser = found;
          authModal.classList.remove("active");
          renderUserMenu();
          showInlineMessage(
            "login-message",
            lang === "en"
              ? "âœ… Logged in successfully!"
              : "âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!",
            "#4caf50"
          );
        } else {
          showInlineMessage(
            "login-message",
            lang === "en"
              ? "âŒ Invalid credentials."
              : "âŒ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©.",
            "#f44336"
          );
        }
      });

      /* RESET PASSWORD (EmailJS) */
      document.getElementById("reset-btn").addEventListener("click", () => {
        const email = document.getElementById("reset-email").value.trim();
        const lang = localStorage.getItem("siteLang") || "en";
        const users = JSON.parse(localStorage.getItem("signupUsers") || "[]");

        if (!email) {
          showInlineMessage(
            "reset-message",
            lang === "en"
              ? "âš  Please enter your email address."
              : "âš  ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.",
            "#f44336"
          );
          return;
        }

        if (!users.some((u) => u.email === email)) {
          showInlineMessage(
            "reset-message",
            lang === "en"
              ? "âŒ This email is not registered."
              : "âŒ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± Ù…Ø³Ø¬Ù„.",
            "#f44336"
          );
          return;
        }

        // Prepare data for your template. Template must have variables: user_name, user_email, reset_link, support_email
        const resetLinkPlaceholder = `https://theartofweb.vercel.app/reset-password.html?email=${encodeURIComponent(
          email
        )}`;
        const templateParams = {
          user_name: email.split("@")[0] || "User",
          user_email: email,
          reset_link: resetLinkPlaceholder,
          support_email: "theartofwebsupp@gmail.com",
        };

        // send via EmailJS (service & template IDs you provided)
        emailjs
          .send("service_qzps9pc", "template_2rgjans", templateParams)
          .then(
            function (response) {
              // success
              showInlineMessage(
                "reset-message",
                lang === "en"
                  ? "âœ… Reset link sent! Check your email."
                  : "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                "#4caf50"
              );
              // optionally close modal after short delay and show login
              setTimeout(() => {
                resetForm.style.display = "none";
                loginForm.style.display = "block";
                // don't auto-login, just show message
              }, 2000);
            },
            function (error) {
              console.error("EmailJS error:", error);
              showInlineMessage(
                "reset-message",
                lang === "en"
                  ? "âŒ Failed to send email. Try again later."
                  : "âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹",
                "#f44336"
              );
            }
          );
      });

      /* ---------- Initial translate & render ---------- */
      document.addEventListener("DOMContentLoaded", () => {
        const savedLang = localStorage.getItem("siteLang") || "en";
        setLanguage(savedLang);
        renderUserMenu();
      });
    </script>
  </body>
</html>
